launch:
    parameters: 
         appPrefix:
             description: Web application prefix
             default: myApp

    steps:
        - provision:
            action: compute.grow
            parameters:
                roleName: web
            output:
                 publicIp: ips
        - download:
            action: gitClone
            parameters:
                roles: [web]
                phase: download
                precedingPhases: [provision]
                url: https://github.com/erkfel/wlp.git
                targetDirectory: wlp
        - install:
            action: execrun
            description: Sample command for cloning git repos
            parameters:
                phase: run
                precedingPhases: [download]
                roles: [web]
                command:
                     - ~/wlp/install.sh

    return:
        - appUrl:
            description: Url to the application
            value: http://${publicIp}:9080

destroy:
  steps:
    - undeployEnv:
        action: "undeployEnv"
        parameters:
          phase: "destroy"